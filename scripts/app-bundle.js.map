{"version":3,"sources":["app.ts","environment.ts","main.ts","pythagoras.ts","resources/index.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { select as d3select, mouse as d3mouse } from 'd3-selection';\nimport { scaleLinear } from 'd3-scale';\n\nexport class App {\n  width = 1280;\n  height = 600;\n  currentMax = 0;\n  baseW = 80;\n  heightFactor = 0;\n  lean = 0;\n\n  running = false;\n  realMax = 11;\n\n  attached() {\n    d3select(this.svg)\n      .on('mousemove', () => this.mouseMove());\n    this.next();\n  }\n\n  private next() {\n    if (this.currentMax < this.realMax) {\n      this.currentMax++;\n      setTimeout(() => this.next(), 500);\n    }\n  }\n\n  private mouseMove() {\n    const [x, y] = d3mouse(this.svg);\n    const scaleFactor = scaleLinear()\n      .domain([this.height, 0])\n      .range([0, .8]);\n    const scaleLean = scaleLinear()\n      .domain([0, this.width / 2, this.width])\n      .range([.5, 0, -.5]);\n    this.heightFactor = scaleFactor(y);\n    this.lean = scaleLean(x);\n  }\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n(<any>Promise).config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { bindable, bindingMode, computedFrom } from 'aurelia-framework';\nimport { interpolateViridis } from 'd3-scale';\n\nfunction deg(radians) {\n  return radians * (180 / Math.PI);\n};\n\nconst memoizedCalc = function (): (any) => { nextRight: number, nextLeft: number, A: number, B: number } {\n  const memo = {};\n\n  const key = ({ w, heightFactor, lean }) => [w, heightFactor, lean].join('-');\n\n  return (args) => {\n    const memoKey = key(args);\n\n    if (memo[memoKey]) {\n      return memo[memoKey];\n    } else {\n      const { w, heightFactor, lean } = args;\n\n      const trigH = heightFactor * w;\n\n      const result = {\n        nextRight: Math.sqrt(trigH ** 2 + (w * (.5 + lean)) ** 2),\n        nextLeft: Math.sqrt(trigH ** 2 + (w * (.5 - lean)) ** 2),\n        A: deg(Math.atan(trigH / ((.5 - lean) * w))),\n        B: deg(Math.atan(trigH / ((.5 + lean) * w)))\n      };\n\n      memo[memoKey] = result;\n      return result;\n    }\n  }\n} ();\n\nexport class Pythagoras {\n  @bindable({ defaultBindingMode: bindingMode.oneTime) w: number;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) x: number;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) y: number;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) heightFactor: number;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) lean: number;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) left: boolean;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) right: boolean;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) lvl: number;\n  @bindable({ defaultBindingMode: bindingMode.oneTime) maxlvl: number;\n\n  nextRight: number;\n  nextLeft: number;\n  A: number;\n  B: number;\n\n  constructor() {\n    const calc = memoizedCalc({\n      w: this.w,\n      heightFactor: this.heightFactor,\n      lean: this.lean\n    });\n    this.nextRight = calc.nextRight;\n    this.nextLeft = calc.nextLeft;\n    this.A = calc.A;\n    this.B = calc.B;\n  }\n\n  get transform() {\n    return `translate(${this.x} ${this.y}) ${this.getRotate()}`;\n  }\n\n  private getRotate() {\n    if (this.left) {\n      return `rotate(${-this.A} 0 ${this.w})`;\n    } else if (this.right) {\n      return `rotate(${this.B} ${this.w} ${this.w})`;\n    } else {\n      return '';\n    }\n  }\n\n  getFill() {\n    return interpolateViridis(this.lvl / this.maxlvl);\n  }\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n"],"sourceRoot":"../src"}